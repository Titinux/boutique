<% full ||= false -%>

<% longestAsset = orderLines.inject(0) {|memo, orderLine| memo >= orderLine.asset.name.length ? memo : orderLine.asset.name.length } -%>
<% longestQt    = orderLines.inject(0) {|memo, orderLine| memo >= orderLine.quantity.to_s.length ? memo : orderLine.quantity.to_s.length } -%>

<% if full -%>
    <% longestUp    = orderLines.inject(0) {|memo, orderLine| memo >= number_to_currency(orderLine.unitaryPrice).length ? memo : number_to_currency(orderLine.unitaryPrice).length } -%>
    <% longestPrice = orderLines.inject(0) {|memo, orderLine| memo >= number_to_currency(orderLine.price).length ? memo : number_to_currency(orderLine.price).length } -%>
<% end %>

<% longestAsset = longestAsset >= 'Asset'.length ? longestAsset : 'Asset'.length -%>
<% longestQt    = longestQt >= 'Quantity'.length ? longestQt : 'Quantity'.length -%>
<% longestUp    = longestAsset >= 'Unitary price'.length ? longestAsset : 'Unitary price'.length -%>
<% longestPrice = longestQt >= 'Price'.length ? longestQt : 'Price'.length -%>
<% longestAsset += 4 -%>
<% longestQt    += 4 -%>
<% longestUp    += 4 -%>
<% longestPrice += 4 -%>

<% unless full -%>
<%= ''.ljust(longestAsset, '-') %>---<%= ''.ljust(longestQt, '-') %>
<%= Asset.model_name.human.center(longestAsset) %> | <%= Order.human_attribute_name(:quantity).center(longestQt) %>
<%= ''.ljust(longestAsset, '-') %>-+-<%= ''.ljust(longestQt, '-') %>
<% orderLines.each do |orderLine| -%>
<%= orderLine.asset.name.ljust(longestAsset) %> | <%= orderLine.quantity.to_s.rjust(longestQt) %>
<% end -%>
<%= ''.ljust(longestAsset, '-') %>---<%= ''.ljust(longestQt, '-') %>
<% else -%>
<%= ''.ljust(longestAsset, '-') %>---<%= ''.ljust(longestQt, '-') %>---<%= ''.ljust(longestUp, '-') %>---<%= ''.ljust(longestPrice, '-') %>
<%= Asset.model_name.human.center(longestAsset) %> | <%= Order.human_attribute_name(:quantity).center(longestQt) %> | <%= Order.human_attribute_name(:uPrice).center(longestUp) %> | <%= Order.human_attribute_name(:price).center(longestPrice) %>
<%= ''.ljust(longestAsset, '-') %>-+-<%= ''.ljust(longestQt, '-') %>-+-<%= ''.ljust(longestUp, '-') %>-+-<%= ''.ljust(longestPrice, '-') %>
<% orderLines.each do |orderLine| -%>
<%= orderLine.asset.name.ljust(longestAsset) %> | <%= orderLine.quantity.to_s.rjust(longestQt) %> | <%= number_to_currency(orderLine.unitaryPrice).rjust(longestUp) %> | <%= number_to_currency(orderLine.price).rjust(longestPrice) %>
<% end -%>
<%= ''.ljust(longestAsset, '-') %>---<%= ''.ljust(longestQt, '-') %>---<%= ''.ljust(longestUp, '-') %>---<%= ''.ljust(longestPrice, '-') %>
<% end -%>
